!function(e,t,r,o,n){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof a[o]&&a[o],s=i.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,r){if(!s[t]){if(!e[t]){var n="function"==typeof a[o]&&a[o];if(!r&&n)return n(t,!0);if(i)return i(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}m.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},m.cache={};var f=s[t]=new u.Module(t);e[t][0].call(f.exports,m,f,f.exports,a)}return s[t].exports;function m(e){var t=m.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=s,u.parent=i,u.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return a[o]}}),a[o]=u;for(var d=0;d<t.length;d++)u(t[d])}({jOZyB:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"signIn",()=>s);var a=e("@xatom/core"),i=e("../../config");let s=async()=>{let e=new a.WFFormComponent('[xa-type="signin-form"]'),t=e.getChildAsComponent('[xa-type="signin-btn"]'),r=e.getChildAsComponent(".form-button-wrapper");t.setAttribute("value","Continue"),t.removeAttribute("disabled"),t.removeCssClass("is-disabled"),r.removeCssClass("is-disabled"),e.removeCssClass("pointer-events-off"),e.onFormSubmit(t=>{if(e.showForm(),e.disableForm(),e.updateSubmitButtonText("Please wait..."),t&&""!==t.email&&""!==t.password){let r=t.email,o=t.password;console.log(r,o),fetch(`${i.BACKEND_BASE_URL}/auth/login`,{method:"POST",headers:i.REQ_HEADERS,body:JSON.stringify({email:r,password:o})}).then(async t=>{if(!t.ok){e.updateTextViaAttrVar({error:"Unable to login. Please try again."}),e.showErrorState(),e.updateSubmitButtonText("Login");return}let r=await t.json();console.log(r);let o={email:r.data.session.user.email,firstName:r.data.user.user_metadata.firstName,lastName:r.data.user.user_metadata.lastName,token:r.data.session.access_token};localStorage.setItem("@bw-user-auth",JSON.stringify(o)),e.updateSubmitButtonText("Redirecting..."),(0,a.navigate)(i.USER_PATHS.tripDesigner)}).catch(t=>{e.updateTextViaAttrVar({error:t.message||"Unable to login. Please try again."}),e.showErrorState(),e.updateSubmitButtonText("Login")}).finally(()=>{e.enableForm()})}})}},{"@xatom/core":"5eqAK","../../config":"7sZNr","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequire94c2");
//# sourceMappingURL=signIn.a109de57.js.map
