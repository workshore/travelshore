!function(e,t,o,r,n){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof a[r]&&a[r],s=i.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,o){if(!s[t]){if(!e[t]){var n="function"==typeof a[r]&&a[r];if(!o&&n)return n(t,!0);if(i)return i(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}c.resolve=function(o){var r=e[t][1][o];return null!=r?r:o},c.cache={};var f=s[t]=new u.Module(t);e[t][0].call(f.exports,c,f,f.exports,a)}return s[t].exports;function c(e){var t=c.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=s,u.parent=i,u.register=function(t,o){e[t]=[function(e,t){t.exports=o},{}]},Object.defineProperty(u,"root",{get:function(){return a[r]}}),a[r]=u;for(var d=0;d<t.length;d++)u(t[d])}({jOZyB:[function(e,t,o,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"signIn",()=>s);var a=e("@xatom/core"),i=e("../../config");let s=async()=>{let e=new a.WFFormComponent('[xa-type="signin-form"]'),t=e.getChildAsComponent('[xa-type="signin-btn"]'),o=e.getChildAsComponent(".form-button-wrapper");t.setAttribute("value","Continue"),t.removeAttribute("disabled"),t.removeCssClass("is-disabled"),o.removeCssClass("is-disabled"),e.removeCssClass("pointer-events-off"),e.onFormSubmit(t=>{if(e.showForm(),e.disableForm(),e.updateSubmitButtonText("Please wait..."),t&&""!==t.email&&""!==t.password){let o=t.email,r=t.password;console.log(o,r),fetch(`${i.BACKEND_BASE_URL}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:r})}).then(async t=>{if(!t.ok){e.updateTextViaAttrVar({error:"Unable to login. Please try again."}),e.showErrorState(),e.updateSubmitButtonText("Login");return}let o=await t.json();console.log(o);let r={email:o.data.session.user.email,firstName:o.data.user.user_metadata.firstName,lastName:o.data.user.user_metadata.lastName,token:o.data.session.access_token};localStorage.setItem("@bw-user-auth",JSON.stringify(r)),e.updateSubmitButtonText("Redirecting..."),(0,a.navigate)(i.USER_PATHS.tripDesigner)}).catch(t=>{e.updateTextViaAttrVar({error:t.message||"Unable to login. Please try again."}),e.showErrorState(),e.updateSubmitButtonText("Login")}).finally(()=>{e.enableForm()})}})}},{"@xatom/core":"5eqAK","../../config":"7sZNr","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequire94c2");
//# sourceMappingURL=signIn.0c6449b7.js.map
